<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Linux Syscall Reference (64 bit)</title>

<!-- ── Local CSS (your existing ones) ───────────────────────────────── -->
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/typography.css">
<link rel="stylesheet" href="css/stylesheet.css">
<link rel="stylesheet" href="css/page.css">
<link rel="stylesheet" href="css/jquery-ui-1.14.1.custom.css">

<!-- ── DataTables 2.3.4 ─────────────────────────────────────────────── -->
<link href="https://cdn.datatables.net/v/dt/dt-2.3.4/datatables.min.css"
      rel="stylesheet"
      integrity="sha384-pmGS6IIcXhAVIhcnh9X/mxffzZNHbuxboycGuQQoP3pAbb0SwlSUUHn2v22bOenI"
      crossorigin="anonymous">

<!-- ── Fonts (Cufon legacy) ─────────────────────────────────────────── -->
<script src="js/cufon-yui.js"></script>
<script src="js/ChunkFive_400.font.js"></script>
<script>
  Cufon('.chunk')('.chunk a', {hover:true});
</script>

<!-- ── jQuery + DataTables JS ───────────────────────────────────────── -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/v/dt/dt-2.3.4/datatables.min.js"
        integrity="sha384-X2pTSfom8FUa+vGQ+DgTCSyBZYkC1RliOduHa0X96D060s7Q//fnOh3LcazRNHyo"
        crossorigin="anonymous"></script>

<!-- ── Syscall JSON file ────────────────────────────────────────────── -->
<script src="syscalls-x86_64.js"></script>

<style>
  body { margin:0; padding:0; }
  #syscall_table { width:100%; }
  th, td { white-space: nowrap; }
</style>

<script>
/* ---------- Helper for register rendering ---------- */
function renderReg(data) {
  if (!data || !data.type) return "-";
  if (data.def && data.def.file)
    return `<a target="_blank" href="https://elixir.bootlin.com/linux/v6.17.4/source/${data.def.file}#L${data.def.line}">${data.type}</a>`;
  return data.type;
}

/* ---------- Table initialization ---------- */
$(function() {
  new DataTable('#syscall_table', {
    data: syscalls_x86_64.aaData,
    pageLength: 20,
    language: {
      lengthMenu: 'Show _MENU_ entries',
      search: 'Filter:',
      info: 'Showing _START_–_END_ of _TOTAL_ syscalls'
    },
    columns: [
      { className: "center" }, // #
      {
        className: "bold",
        render: (data) => {
          const m = data.match(/^sys_(.+)/);
          if (m)
            return `<a target="_blank" href="https://man7.org/linux/man-pages/man2/${m[1]}.2.html">${data}</a>`;
          return data;
        }
      },
      { visible: false, searchable: false }, // Signature
      { searchable: true },                  // Hex
      { render: renderReg, searchable: false }, // rdi
      { render: renderReg, searchable: false }, // rsi
      { render: renderReg, searchable: false }, // rdx
      { render: renderReg, searchable: false }, // r10
      { render: renderReg, searchable: false }, // r8
      { render: renderReg, searchable: false }, // r9
      {
        render: (data, type, row) => {
          const file = row[10];
          const line = row[11];
          if (file && file !== "not found")
            return `<a target="_blank" href="https://elixir.bootlin.com/linux/v6.17.4/source/${file}#L${line}">${file}:${line}</a>`;
          return file || "-";
        },
        searchable: false
      },
      { visible: false, searchable: false } // Line (hidden)
    ],
    scrollX: true,
    layout: {
      topStart: 'info',
      topEnd: 'search',
      bottomStart: 'pageLength',
      bottomEnd: 'paging'
    }
  });
});
</script>
</head>

<body>
  <div id="header">
    <div class="site">
      <div id="headline">
        <h2 class="chunk">Linux Syscall Reference (64 bit)</h2>
      </div>
    </div>
  </div>

  <div id="container2" class="site">
    <table id="syscall_table" class="display cell-border compact stripe hover order-column">
      <thead>
        <tr>
          <th rowspan="2">#</th>
          <th rowspan="2">Name</th>
          <th rowspan="2">Signature</th>
          <th colspan="7" class="ui-state-default">Registers</th>
          <th rowspan="2">Definition</th>
          <th rowspan="2">URL</th>
        </tr>
        <tr>
          <th>rax</th><th>rdi</th><th>rsi</th><th>rdx</th><th>r10</th><th>r8</th><th>r9</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div id="footer" class="site">
    <h4 class="chunk">
      Generated from Linux kernel 6.17.4 using
      <a target="_blank" href="https://www.python.org/">Python</a> and
      <a target="_blank" href="https://datatables.net/">DataTables</a>.
      <br>
      Project on <a href="https://github.com/paolostivanin/syscalls-table-64bit">GitHub</a> ·
      Hosted on <a href="https://github.com">GitHub Pages</a>.
    </h4>
  </div>

  <script>Cufon.now();</script>
</body>
</html>
